@model QuanLyDiemRenLuyen.Models.LecturerWorkloadViewModel
@{
    ViewBag.Title = "Báo Cáo Khối Lượng CVHT";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<style>
    .stats-grid { 
        display: grid; 
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); 
        gap: 20px; 
        margin-bottom: 30px; 
    }
    
    .stat-card { 
        background: white; 
        padding: 20px; 
        border-radius: 12px; 
        box-shadow: 0 2px 8px rgba(0,0,0,0.08); 
    }
    
    .stat-value { 
        font-size: 32px; 
        font-weight: bold; 
        color: #667eea; 
    }
    
    .stat-label { 
        color: #7f8c8d; 
        font-size: 14px; 
        margin-top: 5px; 
    }
    
    .workload-badge { 
        padding: 5px 12px; 
        border-radius: 20px; 
        font-size: 12px; 
        font-weight: 600; 
        color: white; 
    }
    
    .badge-none { 
        background: #6c757d; 
    }
    
    .badge-low { 
        background: #28a745; 
    }
    
    .badge-medium { 
        background: #ffc107; 
    }
    
    .badge-high { 
        background: #dc3545; 
    }
    
    .lecturer-card { 
        background: white; 
        padding: 20px; 
        border-radius: 12px; 
        margin-bottom: 15px; 
        box-shadow: 0 2px 8px rgba(0,0,0,0.08); 
    }
    
    .lecturer-header { 
        display: flex; 
        justify-content: space-between; 
        align-items: center; 
        margin-bottom: 15px; 
    }
    
    .btn {
        padding: 10px 20px;
        border-radius: 6px;
        text-decoration: none;
        font-size: 14px;
        display: inline-block;
        transition: all 0.3s;
        border: none;
        cursor: pointer;
        color: white;
    }
    
    .btn-primary {
        background: #667eea;
        color: white;
    }
    
    .btn-primary:hover {
        background: #5568d3;
        color: white;
    }
    
    .btn-secondary {
        background: #6c757d;
        color: white;
    }
    
    .btn-secondary:hover {
        background: #5a6268;
        color: white;
    }
</style>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-value">@Model.TotalLecturers</div>
        <div class="stat-label">Tổng số giảng viên</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">@Model.AssignedLecturers</div>
        <div class="stat-label">Đang làm CVHT</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">@Model.TotalClasses</div>
        <div class="stat-label">Lớp đã phân công</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">@Model.UnassignedClasses</div>
        <div class="stat-label">Lớp chưa phân công</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">@Model.AverageClassesPerLecturer.ToString("0.0")</div>
        <div class="stat-label">TB lớp/giảng viên</div>
    </div>
</div>

<div style="background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
    <h3 style="margin-bottom: 20px;"><i class="fas fa-users"></i> Danh Sách Giảng Viên</h3>
    
    @foreach (var lecturer in Model.Lecturers)
    {
        <div class="lecturer-card">
            <div class="lecturer-header">
                <div>
                    <strong style="font-size: 16px;">@lecturer.LecturerName</strong>
                    <div style="color: #7f8c8d; font-size: 14px; margin-top: 5px;">
                        <i class="fas fa-envelope"></i> @lecturer.Email
                    </div>
                </div>
                <div style="text-align: right;">
                    <span class="workload-badge badge-@lecturer.WorkloadLevel">
                        @lecturer.ClassCount lớp (@lecturer.TotalStudents SV)
                    </span>
                </div>
            </div>
            @if (lecturer.ClassCount > 0)
            {
                <div style="border-top: 1px solid #e9ecef; padding-top: 10px; margin-top: 10px; color: #7f8c8d; font-size: 13px;">
                    Mức độ: <strong>@(lecturer.WorkloadLevel == "low" ? "Nhẹ" : lecturer.WorkloadLevel == "medium" ? "Trung bình" : lecturer.WorkloadLevel == "high" ? "Nặng" : "Chưa có")</strong>
                </div>
            }
        </div>
    }
    
    @if (!Model.Lecturers.Any())
    {
        <div style="text-align: center; padding: 40px; color: #999;">
            <p>Không có dữ liệu</p>
        </div>
    }
</div>

<div style="margin-top: 20px;">
    <a href="@Url.Action("Index")" class="btn btn-secondary">
        <i class="fas fa-arrow-left"></i> Quay lại
    </a>
    <a href="@Url.Action("BulkAssignment")" class="btn btn-primary" style="background: #28a745; margin-left: 10px;">
        <i class="fas fa-users-cog"></i> Phân Công Hàng Loạt
    </a>
</div>
