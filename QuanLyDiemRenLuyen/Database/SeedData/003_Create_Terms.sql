-- ============================================================================
-- Tạo dữ liệu mẫu bảng TERMS (Học kỳ)
-- 3 năm học: 2024-2025, 2025-2026, 2026-2027
-- Mỗi năm có 3 học kỳ
-- Chạy với: QLDiemRenLuyen
-- ============================================================================

SET SERVEROUTPUT ON;

PROMPT '========================================';
PROMPT 'Tạo dữ liệu Học kỳ (TERMS)';
PROMPT '========================================';

-- Năm học 2024-2025
INSERT INTO TERMS (ID, NAME, YEAR, TERM_NUMBER, YEAR_ID, START_DATE, END_DATE, IS_CURRENT, SCORE_STATUS)
VALUES (RAWTOHEX(SYS_GUID()), 'Học kỳ 1 (2024-2025)', 2024, 1, '2024-2025', 
        TO_DATE('2024-09-01', 'YYYY-MM-DD'), TO_DATE('2024-12-31', 'YYYY-MM-DD'), 0, 'OFFICIAL');

INSERT INTO TERMS (ID, NAME, YEAR, TERM_NUMBER, YEAR_ID, START_DATE, END_DATE, IS_CURRENT, SCORE_STATUS)
VALUES (RAWTOHEX(SYS_GUID()), 'Học kỳ 2 (2024-2025)', 2025, 2, '2024-2025', 
        TO_DATE('2025-01-06', 'YYYY-MM-DD'), TO_DATE('2025-05-31', 'YYYY-MM-DD'), 0, 'OFFICIAL');

INSERT INTO TERMS (ID, NAME, YEAR, TERM_NUMBER, YEAR_ID, START_DATE, END_DATE, IS_CURRENT, SCORE_STATUS)
VALUES (RAWTOHEX(SYS_GUID()), 'Học kỳ 3 (2024-2025)', 2025, 3, '2024-2025', 
        TO_DATE('2025-06-01', 'YYYY-MM-DD'), TO_DATE('2025-08-31', 'YYYY-MM-DD'), 0, 'OFFICIAL');

-- Năm học 2025-2026
INSERT INTO TERMS (ID, NAME, YEAR, TERM_NUMBER, YEAR_ID, START_DATE, END_DATE, IS_CURRENT, SCORE_STATUS)
VALUES (RAWTOHEX(SYS_GUID()), 'Học kỳ 1 (2025-2026)', 2025, 1, '2025-2026', 
        TO_DATE('2025-09-01', 'YYYY-MM-DD'), TO_DATE('2025-12-31', 'YYYY-MM-DD'), 1, 'PROVISIONAL');

INSERT INTO TERMS (ID, NAME, YEAR, TERM_NUMBER, YEAR_ID, START_DATE, END_DATE, IS_CURRENT, SCORE_STATUS)
VALUES (RAWTOHEX(SYS_GUID()), 'Học kỳ 2 (2025-2026)', 2026, 2, '2025-2026', 
        TO_DATE('2026-01-05', 'YYYY-MM-DD'), TO_DATE('2026-05-31', 'YYYY-MM-DD'), 0, 'PROVISIONAL');

INSERT INTO TERMS (ID, NAME, YEAR, TERM_NUMBER, YEAR_ID, START_DATE, END_DATE, IS_CURRENT, SCORE_STATUS)
VALUES (RAWTOHEX(SYS_GUID()), 'Học kỳ 3 (2025-2026)', 2026, 3, '2025-2026', 
        TO_DATE('2026-06-01', 'YYYY-MM-DD'), TO_DATE('2026-08-31', 'YYYY-MM-DD'), 0, 'PROVISIONAL');

-- Năm học 2026-2027
INSERT INTO TERMS (ID, NAME, YEAR, TERM_NUMBER, YEAR_ID, START_DATE, END_DATE, IS_CURRENT, SCORE_STATUS)
VALUES (RAWTOHEX(SYS_GUID()), 'Học kỳ 1 (2026-2027)', 2026, 1, '2026-2027', 
        TO_DATE('2026-09-01', 'YYYY-MM-DD'), TO_DATE('2026-12-31', 'YYYY-MM-DD'), 0, 'PROVISIONAL');

INSERT INTO TERMS (ID, NAME, YEAR, TERM_NUMBER, YEAR_ID, START_DATE, END_DATE, IS_CURRENT, SCORE_STATUS)
VALUES (RAWTOHEX(SYS_GUID()), 'Học kỳ 2 (2026-2027)', 2027, 2, '2026-2027', 
        TO_DATE('2027-01-04', 'YYYY-MM-DD'), TO_DATE('2027-05-31', 'YYYY-MM-DD'), 0, 'PROVISIONAL');

INSERT INTO TERMS (ID, NAME, YEAR, TERM_NUMBER, YEAR_ID, START_DATE, END_DATE, IS_CURRENT, SCORE_STATUS)
VALUES (RAWTOHEX(SYS_GUID()), 'Học kỳ 3 (2026-2027)', 2027, 3, '2026-2027', 
        TO_DATE('2027-06-01', 'YYYY-MM-DD'), TO_DATE('2027-08-31', 'YYYY-MM-DD'), 0, 'PROVISIONAL');

COMMIT;

PROMPT '✓ Đã tạo 9 học kỳ (3 năm học x 3 học kỳ)!';
PROMPT '';

-- Xác minh
PROMPT 'Danh sách các học kỳ:';
SELECT NAME, YEAR_ID, TERM_NUMBER, 
       TO_CHAR(START_DATE, 'DD/MM/YYYY') AS START_DATE, 
       TO_CHAR(END_DATE, 'DD/MM/YYYY') AS END_DATE,
       CASE WHEN IS_CURRENT = 1 THEN 'X' ELSE '' END AS IS_CURRENT_TERM,
       SCORE_STATUS
FROM TERMS
ORDER BY YEAR_ID, TERM_NUMBER;
